!function(){function a(b,c){if("function"==typeof b)return a("*",b);if("function"==typeof c)for(var e=new d(b),f=1;f<arguments.length;++f)a.callbacks.push(e.middleware(arguments[f]));else"string"==typeof b?a.show(b,c):a.start(b)}function b(b){var c=window.location.pathname+window.location.search;c!=b.canonicalPath&&(a.stop(),b.unhandled=!0,window.location=b.canonicalPath)}function c(a,b){"/"==a[0]&&0!=a.indexOf(l)&&(a=l+a);var c=a.indexOf("?");if(this.canonicalPath=a,this.path=a.replace(l,"")||"/",this.title=document.title,this.state=b||{},this.state.path=a,this.querystring=~c?a.slice(c+1):"",this.pathname=~c?a.slice(0,c):a,this.params=[],this.hash="",~this.path.indexOf("#")){var d=this.path.split("#");this.path=d[0],this.hash=d[1]||"",this.querystring=this.querystring.split("#")[0]}}function d(a,b){b=b||{},this.path=a,this.method="GET",this.regexp=e(a,this.keys=[],b.sensitive,b.strict)}function e(a,b,c,d){return a instanceof RegExp?a:(a instanceof Array&&(a="("+a.join("|")+")"),a=a.concat(d?"":"/?").replace(/\/\(/g,"(?:/").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(a,c,d,e,f,g){return b.push({name:e,optional:!!g}),c=c||"",""+(g?"":c)+"(?:"+(g?c:"")+(d||"")+(f||d&&"([^/.]+?)"||"([^/]+?)")+")"+(g||"")}).replace(/([\/.])/g,"\\$1").replace(/\*/g,"(.*)"),new RegExp("^"+a+"$",c?"":"i"))}function f(b){if(b.state){var c=b.state.path;a.replace(c,b.state)}}function g(b){if(1==h(b)&&!(b.metaKey||b.ctrlKey||b.shiftKey||b.defaultPrevented)){for(var c=b.target;c&&"A"!=c.nodeName;)c=c.parentNode;if(c&&"A"==c.nodeName){var d=c.getAttribute("href");if(!(c.pathname==location.pathname&&(c.hash||"#"==d)||d.indexOf("mailto:")>-1||c.target||!i(c.href))){var e=c.pathname+c.search+(c.hash||""),f=e+c.hash;e=e.replace(l,""),l&&f==e||(b.preventDefault(),a.show(f))}}}}function h(a){return a=a||window.event,null==a.which?a.button:a.which}function i(a){var b=location.protocol+"//"+location.hostname;return location.port&&(b+=":"+location.port),0==a.indexOf(b)}var j,k=!0,l="";a.callbacks=[],a.base=function(a){return 0==arguments.length?l:void(l=a)},a.start=function(b){if(b=b||{},!j&&(j=!0,!1===b.dispatch&&(k=!1),!1!==b.popstate&&window.addEventListener("popstate",f,!1),!1!==b.click&&window.addEventListener("click",g,!1),k)){var c=location.pathname+location.search+location.hash;a.replace(c,null,!0,k)}},a.stop=function(){j=!1,removeEventListener("click",g,!1),removeEventListener("popstate",f,!1)},a.show=function(b,d,e){var f=new c(b,d);return!1!==e&&a.dispatch(f),f.unhandled||f.pushState(),f},a.replace=function(b,d,e,f){var g=new c(b,d);return g.init=e,null==f&&(f=!0),f&&a.dispatch(g),g.save(),g},a.dispatch=function(c){function d(){var f=a.callbacks[e++];return f?void f(c,d):b(c)}var e=0;d()},a.Context=c,c.prototype.pushState=function(){history.pushState(this.state,this.title,this.canonicalPath)},c.prototype.save=function(){history.replaceState(this.state,this.title,this.canonicalPath)},a.Route=d,d.prototype.middleware=function(a){var b=this;return function(c,d){return b.match(c.path,c.params)?a(c,d):void d()}},d.prototype.match=function(a,b){var c=this.keys,d=a.indexOf("?"),e=~d?a.slice(0,d):a,f=this.regexp.exec(decodeURIComponent(e));if(!f)return!1;for(var g=1,h=f.length;h>g;++g){var i=c[g-1],j="string"==typeof f[g]?decodeURIComponent(f[g]):f[g];i?b[i.name]=void 0!==b[i.name]?b[i.name]:j:b.push(j)}return!0},"undefined"==typeof module?window.page=a:module.exports=a}(),function(){console.log("Hello world!")}(this);